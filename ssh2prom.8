.\" Generated by Mmark Markdown Processer - mmark.miek.nl
.TH "SSH2PROM" 8 "April 2024" "System Administration" "Prometheus"

.SH "NAME"
.PP
ssh2prom - export failed logins to prometheus

.SH "SYNOPSIS"
.PP
\fBssh2prom\fP [\fBOPTIONS\fP]...

.SH "DESCRIPTION"
.PP
\fBSsh2prom\fP parsed the journald of ssh and extract failed login attemps. It exports two metrics

.IP \(bu 4
ssh_failed_total{family="1|2"}: all failed logins
.IP \(bu 4
ssh_failed_root_total{family="1|2"}: failed logins for root only
.IP \(bu 4
ssh_sucess_total{}: all successful logins


.PP
If family is 1 it is an IPv4 connection, for 2 it is coming over IPv6.

.SH "OPTIONS"
.TP
\fB\fC-a\fR \fBADDR\fP
Start the prometheus server on \fIADDR\fP
.TP
\fB\fC-d\fR
Enable debugging, show the logs and parsed users and address family
.TP
\fB\fC-n\fR
Dry run, do everything except exporting the metrics
.TP
\fB\fC-u\fR \fBUNIT\fP
Use unit \fBUNIT\fP instead of "ssh"


.SH "AUTHOR"
.PP
Miek Gieben miek@miek.nl
\[la]mailto:miek@miek.nl\[ra].

